<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Zhuo</title>
    <link rel="icon" href="assets/images/cat_icon.png">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.1/purify.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-74SKSZF27E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-74SKSZF27E');
    </script>
</head>
<body id="page-top">
    <header>
        <h1>
            Simple Dialogs
        </h1>
    </header>
    <main>
        <dialog id="alertDialog">
            <p>Alert pressed!</p>
            <form method="dialog">
                <button>Ok</button>
            </form>
        </dialog>

        <dialog id="confirmDialog">
            <p>Do you confirm this?</p>
            <form method="dialog">
                <button value="false">Cancel</button>
                <button value="true">Ok</button>
            </form>
        </dialog>

        <dialog id="promtDialog">
            <form method="dialog">
                <label for="name">What is your name?</label>
                <br>
                <input type="text" id="name" name="name"/>
                <br>
                <button value="">Cancel</button>
                <button id="okButton" value="">Ok</button>
            </form>
        </dialog>

        <p>
            <button type="button" id="alert">Alert</button>
            <button type="button" id="confirm">Confirm</button>
            <button type="button" id="promt">Prompt</button>
        </p>
        <hr />
        <output id="dialogOutput"></output>
    </main>
    <footer>
        <hr />
        &copy; 2023 Zhuo
    </footer>
</body>
<script type="module">
    import * as customdialog from './customdialog.js'
    let alertButton = document.getElementById('alert');
    alertButton.addEventListener('click', customdialog.alertButtonOnClick);

    let confirmButton = document.getElementById('confirm');
    confirmButton.addEventListener('click', customdialog.confirmButtonOnClick);

    let confirmDialog = document.getElementById('confirmDialog');
    confirmDialog.addEventListener('close', customdialog.confirmDialogOnClose);

    let promtButton = document.getElementById('promt');
    promtButton.addEventListener('click', customdialog.promtButtonOnClick);

    let inputText = document.getElementById('name');
    inputText.addEventListener('change', customdialog.inputTextOnChange);

    let promtDialog = document.getElementById('promtDialog');
    promtDialog.addEventListener('close', () => {
        let promtDialog = document.getElementById('promtDialog');
        let dialogOutput = document.getElementById('dialogOutput');
        if (!promtDialog.returnValue) {
            dialogOutput.innerHTML = 'User didnâ€™t enter anything';
        } else {
            let clean = DOMPurify.sanitize(promtDialog.returnValue);
            dialogOutput.innerHTML = clean;
        }
    });
</script>
</html>